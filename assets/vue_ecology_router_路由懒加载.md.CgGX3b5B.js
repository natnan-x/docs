import{_ as i,c as a,o as t,ah as l}from"./chunks/framework.D_x7hp0y.js";const E=JSON.parse('{"title":"Vue-Router 路由懒加载及其实现原理","description":"","frontmatter":{},"headers":[],"relativePath":"vue/ecology/router/路由懒加载.md","filePath":"vue/ecology/router/路由懒加载.md","lastUpdated":1763368640000}'),e={name:"vue/ecology/router/路由懒加载.md"};function n(h,s,k,p,r,d){return t(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="vue-router-路由懒加载及其实现原理" tabindex="-1">Vue-Router 路由懒加载及其实现原理 <a class="header-anchor" href="#vue-router-路由懒加载及其实现原理" aria-label="Permalink to “Vue-Router 路由懒加载及其实现原理”">​</a></h1><p>路由懒加载（Route Lazy Loading）是指在 Vue 应用中<strong>按需加载路由对应的组件</strong>，避免一次性加载所有页面组件，从而优化首屏加载性能。</p><h2 id="_1-概念" tabindex="-1">1. 概念 <a class="header-anchor" href="#_1-概念" aria-label="Permalink to “1. 概念”">​</a></h2><ul><li>默认情况下，所有路由组件会在应用启动时被打包加载。</li><li>懒加载通过动态 <code>import()</code> 语法，将组件拆分成独立的代码块（chunk），仅在访问该路由时才异步加载对应模块。</li><li>优点：减少初始包大小，加快首屏渲染速度。</li></ul><h2 id="_2-使用方法" tabindex="-1">2. 使用方法 <a class="header-anchor" href="#_2-使用方法" aria-label="Permalink to “2. 使用方法”">​</a></h2><h3 id="基础示例" tabindex="-1">基础示例 <a class="header-anchor" href="#基础示例" aria-label="Permalink to “基础示例”">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createRouter, createWebHistory } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-router&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> routes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@/views/Home.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 懒加载</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/about&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@/views/About.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 懒加载</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> router</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createRouter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  history: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createWebHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  routes,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> router;</span></span></code></pre></div><h3 id="命名代码块-可选" tabindex="-1">命名代码块（可选） <a class="header-anchor" href="#命名代码块-可选" aria-label="Permalink to “命名代码块（可选）”">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> About</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackChunkName: &quot;about&quot; */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/views/About.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><blockquote><p>命名代码块可在打包后生成可识别文件名，方便缓存和调试。</p></blockquote><h2 id="_3-实现原理" tabindex="-1">3. 实现原理 <a class="header-anchor" href="#_3-实现原理" aria-label="Permalink to “3. 实现原理”">​</a></h2><h3 id="_3-1-动态导入原理" tabindex="-1">3.1 动态导入原理 <a class="header-anchor" href="#_3-1-动态导入原理" aria-label="Permalink to “3.1 动态导入原理”">​</a></h3><p>懒加载依赖 <strong>ES Module 的动态导入特性</strong>：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@/views/About.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>这不是立即执行的同步导入，而是返回一个 Promise：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> modulePromise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@/views/About.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">modulePromise.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // module.default 即为组件定义</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_3-2-webpack-vite-代码分割" tabindex="-1">3.2 Webpack/Vite 代码分割 <a class="header-anchor" href="#_3-2-webpack-vite-代码分割" aria-label="Permalink to “3.2 Webpack/Vite 代码分割”">​</a></h3><ul><li>构建工具（如 Webpack、Vite）在解析到 <code>import()</code> 时，会自动将该模块单独打包成一个 <strong>chunk 文件</strong>。</li><li>当用户访问对应路由时，Vue-Router 调用 <code>import()</code> 加载组件模块。</li><li>浏览器发起网络请求下载对应 chunk，加载完成后渲染页面。</li></ul><h3 id="_3-3-vue-router-加载流程" tabindex="-1">3.3 Vue-Router 加载流程 <a class="header-anchor" href="#_3-3-vue-router-加载流程" aria-label="Permalink to “3.3 Vue-Router 加载流程”">​</a></h3><ol><li>用户访问某个路由。</li><li>路由配置中对应组件是一个返回 Promise 的函数（即懒加载函数）。</li><li>Vue-Router 调用该函数触发动态导入。</li><li>构建工具生成的异步 chunk 被加载，Promise 解析完成。</li><li>Vue 将加载的组件渲染到页面。</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/about&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@/views/About.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>此处的箭头函数返回 Promise，Vue-Router 内部检测到后会等待其解析，再进行挂载。</p><h3 id="_3-4-性能优势" tabindex="-1">3.4 性能优势 <a class="header-anchor" href="#_3-4-性能优势" aria-label="Permalink to “3.4 性能优势”">​</a></h3><ul><li>初次加载时不再引入全部组件。</li><li>页面切换时异步请求对应 chunk，降低首屏体积。</li><li>可结合浏览器缓存提高二次访问速度。</li></ul><h2 id="_4-使用场景" tabindex="-1">4. 使用场景 <a class="header-anchor" href="#_4-使用场景" aria-label="Permalink to “4. 使用场景”">​</a></h2><ol><li><strong>大型 SPA 应用</strong>：组件多、页面复杂。</li><li><strong>后台管理系统</strong>：模块化功能，用户不一定访问全部页面。</li><li><strong>移动端项目</strong>：优化首屏加载体验。</li></ol><h2 id="_5-为什么要使用" tabindex="-1">5. 为什么要使用 <a class="header-anchor" href="#_5-为什么要使用" aria-label="Permalink to “5. 为什么要使用”">​</a></h2><ul><li><strong>性能优化</strong>：减少初始包体积。</li><li><strong>用户体验</strong>：访问时按需加载，提高首屏渲染速度。</li><li><strong>可维护性</strong>：模块分离，易于管理。</li></ul><h2 id="_6-总结" tabindex="-1">6. 总结 <a class="header-anchor" href="#_6-总结" aria-label="Permalink to “6. 总结”">​</a></h2><table tabindex="0"><thead><tr><th>优点</th><th>原理</th><th>实现方式</th></tr></thead><tbody><tr><td>减少首屏体积</td><td>动态 import 分包</td><td>使用<code>() =&gt; import()</code>定义路由组件</td></tr><tr><td>加载按需触发</td><td>Promise 异步解析</td><td>Vue-Router 检测懒加载函数后执行加载</td></tr><tr><td>缓存友好</td><td>chunk 可独立缓存</td><td>结合 HTTP 缓存策略</td></tr></tbody></table><p><strong>一句话总结</strong>：</p><blockquote><p>Vue-Router 懒加载基于动态 <code>import()</code> 和构建工具的代码分割机制，实现了“访问时加载组件”，是优化 SPA 性能的核心手段。</p></blockquote>`,32)])])}const g=i(e,[["render",n]]);export{E as __pageData,g as default};
