import{_ as i,c as a,o as t,ah as e}from"./chunks/framework.D_x7hp0y.js";const E=JSON.parse('{"title":"Vue 生命周期详解","description":"","frontmatter":{},"headers":[],"relativePath":"vue/pack/生命周期.md","filePath":"vue/pack/生命周期.md","lastUpdated":1763384180000}'),n={name:"vue/pack/生命周期.md"};function l(h,s,p,d,k,r){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="vue-生命周期详解" tabindex="-1">Vue 生命周期详解 <a class="header-anchor" href="#vue-生命周期详解" aria-label="Permalink to “Vue 生命周期详解”">​</a></h1><p><strong>定义：</strong> Vue 生命周期是组件从创建、挂载、更新到销毁的全过程中一系列钩子函数的总称。掌握生命周期是理解组件运行机制、执行副作用逻辑、优化性能的关键。</p><h2 id="一、vue2-与-vue3-生命周期对照汇总" tabindex="-1">一、Vue2 与 Vue3 生命周期对照汇总 <a class="header-anchor" href="#一、vue2-与-vue3-生命周期对照汇总" aria-label="Permalink to “一、Vue2 与 Vue3 生命周期对照汇总”">​</a></h2><table tabindex="0"><thead><tr><th>阶段</th><th>Vue2 生命周期钩子</th><th>Vue3 对应钩子（组合式 API）</th><th>主要用途</th></tr></thead><tbody><tr><td>创建前</td><td>beforeCreate</td><td>setup（逻辑替代）</td><td>初始化数据、依赖注入前</td></tr><tr><td>创建后</td><td>created</td><td>setup（逻辑替代）</td><td>获取初始数据、调用接口</td></tr><tr><td>挂载前</td><td>beforeMount</td><td>onBeforeMount</td><td>模板编译完成但未渲染</td></tr><tr><td>挂载后</td><td>mounted</td><td>onMounted</td><td>操作 DOM、请求接口、注册事件监听</td></tr><tr><td>更新前</td><td>beforeUpdate</td><td>onBeforeUpdate</td><td>数据更新但视图未更新，可做数据校验</td></tr><tr><td>更新后</td><td>updated</td><td>onUpdated</td><td>视图更新后操作 DOM、动画处理</td></tr><tr><td>卸载前</td><td>beforeDestroy</td><td>onBeforeUnmount</td><td>清除定时器、取消订阅、解绑事件</td></tr><tr><td>卸载后</td><td>destroyed</td><td>onUnmounted</td><td>清理内存、断开引用、防止内存泄漏</td></tr><tr><td>keep-alive 激活</td><td>activated</td><td>onActivated</td><td>缓存组件被激活时恢复状态</td></tr><tr><td>keep-alive 停用</td><td>deactivated</td><td>onDeactivated</td><td>缓存组件失活时保存状态</td></tr><tr><td>错误捕获</td><td>errorCaptured</td><td>onErrorCaptured</td><td>捕获子组件运行时错误</td></tr></tbody></table><h2 id="二、各生命周期阶段详细说明" tabindex="-1">二、各生命周期阶段详细说明 <a class="header-anchor" href="#二、各生命周期阶段详细说明" aria-label="Permalink to “二、各生命周期阶段详细说明”">​</a></h2><h3 id="_1-创建阶段" tabindex="-1">1. 创建阶段 <a class="header-anchor" href="#_1-创建阶段" aria-label="Permalink to “1. 创建阶段”">​</a></h3><p><strong>钩子：</strong> <code>beforeCreate</code>、<code>created</code></p><p><strong>执行顺序：</strong> 初始化 → 数据观测 → 实例化完成</p><p><strong>常见用途：</strong></p><ul><li>初始化组件内数据、计算属性、侦听器</li><li>发送初次请求（如拉取页面基础数据）</li><li>不可访问 DOM（此时尚未挂载）</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchUserInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 拉取初始化数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-挂载阶段" tabindex="-1">2. 挂载阶段 <a class="header-anchor" href="#_2-挂载阶段" aria-label="Permalink to “2. 挂载阶段”">​</a></h3><p><strong>钩子：</strong> <code>beforeMount</code>、<code>mounted</code></p><p><strong>执行顺序：</strong> 模板编译完成 → 虚拟 DOM 创建 → DOM 渲染</p><p><strong>常见用途：</strong></p><ul><li>访问并操作 DOM 元素</li><li>绑定第三方库（如 ECharts、Swiper）</li><li>注册全局事件、监听滚动等</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  chart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(option);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_3-更新阶段" tabindex="-1">3. 更新阶段 <a class="header-anchor" href="#_3-更新阶段" aria-label="Permalink to “3. 更新阶段”">​</a></h3><p><strong>钩子：</strong> <code>beforeUpdate</code>、<code>updated</code></p><p><strong>执行顺序：</strong> 响应式数据变化 → 虚拟 DOM diff → 重新渲染</p><p><strong>常见用途：</strong></p><ul><li>在更新前做数据校验或缓存旧值</li><li>在视图更新后执行动画或 DOM 对比</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onBeforeUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;组件即将更新&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onUpdated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DOM 已更新&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_4-卸载阶段" tabindex="-1">4. 卸载阶段 <a class="header-anchor" href="#_4-卸载阶段" aria-label="Permalink to “4. 卸载阶段”">​</a></h3><p><strong>钩子：</strong> <code>beforeUnmount</code>、<code>unmounted</code></p><p><strong>执行顺序：</strong> 从页面移除组件 → 销毁绑定事件、清理内存</p><p><strong>常见用途：</strong></p><ul><li>清除 <code>setInterval</code> / <code>setTimeout</code></li><li>解绑事件监听器（如 window resize）</li><li>断开 WebSocket、API 轮询</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onBeforeUnmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;resize&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleResize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_5-keep-alive-阶段" tabindex="-1">5. keep-alive 阶段 <a class="header-anchor" href="#_5-keep-alive-阶段" aria-label="Permalink to “5. keep-alive 阶段”">​</a></h3><p><strong>钩子：</strong> <code>activated</code>、<code>deactivated</code></p><p><strong>常见用途：</strong></p><ul><li><code>activated</code>：从缓存中恢复组件状态，如分页、滚动位置。</li><li><code>deactivated</code>：离开时保存状态。</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onActivated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓存组件被激活&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onDeactivated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓存组件被停用&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_6-错误捕获阶段" tabindex="-1">6. 错误捕获阶段 <a class="header-anchor" href="#_6-错误捕获阶段" aria-label="Permalink to “6. 错误捕获阶段”">​</a></h3><p><strong>钩子：</strong> <code>errorCaptured</code></p><p><strong>常见用途：</strong> 捕获子组件运行时错误，记录日志或上报。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onErrorCaptured</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;捕获到错误：&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 阻止错误继续向上传递</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="三、生命周期执行顺序总结-图示逻辑" tabindex="-1">三、生命周期执行顺序总结（图示逻辑） <a class="header-anchor" href="#三、生命周期执行顺序总结-图示逻辑" aria-label="Permalink to “三、生命周期执行顺序总结（图示逻辑）”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>beforeCreate → created → beforeMount → mounted → beforeUpdate → updated → beforeUnmount → unmounted</span></span></code></pre></div><h2 id="四、总结-面试高频一句话" tabindex="-1">四、总结（面试高频一句话） <a class="header-anchor" href="#四、总结-面试高频一句话" aria-label="Permalink to “四、总结（面试高频一句话）”">​</a></h2><blockquote><p>Vue 生命周期是组件运行的完整流程，从创建、挂载、更新到卸载。开发中常在 mounted 操作 DOM、在 updated 处理数据联动、在 unmounted 清理副作用，是掌握 Vue 组件逻辑的核心基础。</p></blockquote>`,42)])])}const g=i(n,[["render",l]]);export{E as __pageData,g as default};
