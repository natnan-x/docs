# å¯¹è±¡æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ

## ä¸€ã€å¯¹è±¡åŸºç¡€æ¦‚å¿µ

- **å®šä¹‰ï¼š** å¯¹è±¡ï¼ˆObjectï¼‰æ˜¯ JavaScript ä¸­ä¸€ç§ **é”®å€¼å¯¹ï¼ˆkey-valueï¼‰** æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨ä¸€ç»„æœ‰åºæˆ–æ— åºçš„æ•°æ®ã€‚
- **ç‰¹ç‚¹ï¼š**
  1. é”®ï¼ˆkeyï¼‰å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ– Symbolã€‚
  2. å€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆåŸºæœ¬ç±»å‹æˆ–å¼•ç”¨ç±»å‹ï¼‰ã€‚
  3. å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ï¼Œèµ‹å€¼å’Œæ‹·è´é»˜è®¤æ˜¯å¼•ç”¨æ‹·è´ã€‚
- **åˆ¤æ–­å¯¹è±¡ï¼š**

```js
typeof obj === "object" && obj !== null; // åˆ¤æ–­å¯¹è±¡ç±»å‹ âœ…
Object.prototype.toString.call(obj); // "[object Object]"
```

## äºŒã€ES5 å¸¸ç”¨æ–¹æ³•

| æ–¹æ³•                                       | åŠŸèƒ½                          | ç¤ºä¾‹                                  | æ˜¯å¦ä¿®æ”¹åŸå¯¹è±¡   |
| ------------------------------------------ | ----------------------------- | ------------------------------------- | ---------------- |
| `Object.keys(obj)`                         | è¿”å›å¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§åæ•°ç»„  | `{a:1,b:2}` â†’ `['a','b']`             | âŒ               |
| `Object.values(obj)`                       | è¿”å›å¯¹è±¡è‡ªèº«å±æ€§å€¼æ•°ç»„        | `{a:1,b:2}` â†’ `[1,2]`                 | âŒ               |
| `Object.entries(obj)`                      | è¿”å› `[key,value]` æ•°ç»„       | `{a:1,b:2}` â†’ `[["a",1],["b",2]]`     | âŒ               |
| `Object.assign(target, source)`            | åˆå¹¶å¯¹è±¡                      | `{a:1}, {b:2}` â†’ `{a:1,b:2}`          | âœ… ä¿®æ”¹ target   |
| `Object.hasOwnProperty(key)`               | åˆ¤æ–­æ˜¯å¦æ‹¥æœ‰è‡ªèº«å±æ€§          | `obj.hasOwnProperty('a')`             | âŒ               |
| `Object.freeze(obj)`                       | å†»ç»“å¯¹è±¡ï¼ˆä¸å¯æ”¹ï¼‰            | `obj.a=2` ä¸ç”Ÿæ•ˆ                      | âœ… æ”¹å˜ obj çŠ¶æ€ |
| `Object.seal(obj)`                         | å¯†å°å¯¹è±¡ï¼ˆç¦æ­¢æ–°å¢/åˆ é™¤å±æ€§ï¼‰ | å¯ä¿®æ”¹å·²æœ‰å€¼                          | âœ… æ”¹å˜ obj çŠ¶æ€ |
| `Object.defineProperty(obj,key,desc)`      | å®šä¹‰æˆ–ä¿®æ”¹å±æ€§æè¿°ç¬¦          | æ§åˆ¶ writable/enumerable/configurable | âœ… æ”¹å˜ obj çŠ¶æ€ |
| `Object.getOwnPropertyDescriptor(obj,key)` | è·å–å±æ€§æè¿°ç¬¦                | `{value:..., writable:...}`           | âŒ               |

## ä¸‰ã€ES6 æ–°å¢æ–¹æ³•

| æ–¹æ³•                                | åŠŸèƒ½                      | ç¤ºä¾‹                                | æ˜¯å¦ä¿®æ”¹åŸå¯¹è±¡ |
| ----------------------------------- | ------------------------- | ----------------------------------- | -------------- |
| `Object.is(value1,value2)`          | ç²¾ç¡®æ¯”è¾ƒä¸¤ä¸ªå€¼            | `Object.is(NaN,NaN)` â†’ true         | âŒ             |
| `Object.getOwnPropertySymbols(obj)` | è·å–å¯¹è±¡çš„ Symbol å±æ€§    | `{[Symbol('s')]:1}` â†’ `[Symbol(s)]` | âŒ             |
| è§£æ„èµ‹å€¼                            | å¯¹è±¡æ‹†åˆ†                  | `let {a,b} = obj;`                  | âŒ             |
| æ‰©å±•è¿ç®—ç¬¦ `...`                    | åˆå¹¶æˆ–å…‹éš†å¯¹è±¡            | `{...obj1,...obj2}`                 | âŒ             |
| `Object.fromEntries()`              | å°† `[key,value]` è½¬å›å¯¹è±¡ | `[['a',1]] â†’ {a:1}`                 | âŒ             |

## å››ã€ES7ï¼ˆES2016ï¼‰æ–°å¢æ–¹æ³•

| æ–¹æ³•                  | åŠŸèƒ½                                  | ç¤ºä¾‹                  | æ˜¯å¦ä¿®æ”¹åŸå¯¹è±¡ |
| --------------------- | ------------------------------------- | --------------------- | -------------- |
| `Object.values(obj)`  | å·²åœ¨ ES5 åæ‰©å±•ï¼ŒES7 å®ç”¨æ€§å¢å¼º       | `{a:1}` â†’ `[1]`       | âŒ             |
| `Object.entries(obj)` | å·²åœ¨ ES5/ES6 åæ‰©å±•ï¼Œé…åˆ fromEntries | `{a:1}` â†’ `[["a",1]]` | âŒ             |

::: warning
âš ï¸ å¯¹è±¡çš„æ ¸å¿ƒæ–¹æ³•åœ¨ ES5/ES6 å·²è¦†ç›–ï¼ŒES7 å¹¶æœªæ–°å¢å¤§è§„æ¨¡æ–¹æ³•ï¼Œæ›´å¤šæ˜¯è¯­æ³•ä¼˜åŒ–å’Œè¿­ä»£ä¾¿åˆ©æ€§ã€‚
:::

## äº”ã€åŸå¯¹è±¡æ˜¯å¦è¢«ç ´åæ€»ç»“

| æ–¹æ³•ç±»å‹     | æ–¹æ³•ç¤ºä¾‹                                                                                                                                                                                                                                                 | æ˜¯å¦ç ´ååŸå¯¹è±¡ |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| ä¿®æ”¹åŸå¯¹è±¡   | `Object.assign(target, source)`, `Object.defineProperty(obj,key,desc)`, `Object.defineProperties(obj,props)`, `delete obj.key`, `Object.freeze(obj)`, `Object.seal(obj)`                                                                                 | âœ…             |
| ä¸ä¿®æ”¹åŸå¯¹è±¡ | `Object.keys(obj)`, `Object.values(obj)`, `Object.entries(obj)`, `Object.getOwnPropertyNames(obj)`, `Object.getOwnPropertySymbols(obj)`, `Object.getOwnPropertyDescriptor(obj,key)`, `Object.is(value1,value2)`, `{...obj}`, `Object.fromEntries(array)` | âŒ             |

## å…­ã€å‰ç«¯é¢è¯•å¸¸è§æ‹“å±•é¢˜

#### ğŸ’¬Q1: å¯¹è±¡å¦‚ä½•æµ…æ‹·è´å’Œæ·±æ‹·è´ï¼Ÿ

**è€ƒå¯Ÿç‚¹ï¼š**å¼•ç”¨ç±»å‹æ‹·è´

```js
let obj = { a: 1, b: { c: 2 } };
// æµ…æ‹·è´
let shallow = { ...obj };
shallow.b.c = 100;
console.log(obj.b.c); // 100

// æ·±æ‹·è´
let deep = JSON.parse(JSON.stringify(obj));
deep.b.c = 200;
console.log(obj.b.c); // 100
```

#### ğŸ’¬Q2: å¦‚ä½•åˆå¹¶å¤šä¸ªå¯¹è±¡ï¼Ÿ

**è€ƒå¯Ÿç‚¹ï¼š**`Object.assign` / æ‰©å±•è¿ç®—ç¬¦

```js
let obj1 = { a: 1 };
let obj2 = { b: 2 };
let merged = { ...obj1, ...obj2 }; // {a:1,b:2}
let merged2 = Object.assign({}, obj1, obj2); // {a:1,b:2}
```

#### ğŸ’¬Q3: å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Ÿ

**è€ƒå¯Ÿç‚¹ï¼š**å±æ€§é•¿åº¦ã€é”®æ•°ç»„åˆ¤æ–­

```js
let obj = {};
Object.keys(obj).length === 0; // true
```

#### ğŸ’¬Q4: å¯¹è±¡ä¸ Map çš„åŒºåˆ«ï¼Ÿ

**è€ƒå¯Ÿç‚¹ï¼š**é”®ç±»å‹ã€è¿­ä»£é¡ºåºã€æ€§èƒ½
| åŒºåˆ« | Object | Map |
| --- | ------------------------- | ------------------------- |
| é”®ç±»å‹ | å­—ç¬¦ä¸² / Symbol | ä»»æ„ç±»å‹ |
| æœ‰åº | å¦ | æ˜¯ï¼ˆæ’å…¥é¡ºåºï¼‰ |
| éå† | `for..in` / `Object.keys` | `map.forEach` / `for..of` |
| åŸå‹ | æœ‰åŸå‹é“¾ | æ— åŸå‹é“¾ |

#### ğŸ’¬Q5: å¦‚ä½•éå†å¯¹è±¡ï¼ˆå« Symbolï¼‰ï¼Ÿ

**è€ƒå¯Ÿç‚¹ï¼š**å±æ€§ç±»å‹åŒºåˆ†

```js
let sym = Symbol("s");
let obj = { a: 1, [sym]: 2 };
Object.keys(obj); // ["a"]
Object.getOwnPropertySymbols(obj); // [Symbol(s)]
Object.getOwnPropertyNames(obj); // ["a"]
```

#### ğŸ’¬Q6: å¯¹è±¡å±æ€§æè¿°ç¬¦å’Œ defineProperty

**è€ƒå¯Ÿç‚¹ï¼š**æ§åˆ¶å¯¹è±¡å±æ€§ç‰¹æ€§

```js
let obj = {};
Object.defineProperty(obj, "a", {
  value: 1,
  writable: false,
  enumerable: true,
  configurable: false,
});
obj.a = 2; // ä¸ç”Ÿæ•ˆ
console.log(obj.a); // 1
```

#### ğŸ’¬Q7: å¯¹è±¡æ‰å¹³åŒ–/åµŒå¥—å¯¹è±¡è®¿é—®

**è€ƒå¯Ÿç‚¹ï¼š**åµŒå¥—æ•°æ®ç»“æ„

```js
let obj = { a: { b: { c: 1 } } };
console.log(obj?.a?.b?.c); // 1 (å¯é€‰é“¾)
```

#### ğŸ’¬Q8: å¯¹è±¡çš„è§£æ„èµ‹å€¼ä¸é»˜è®¤å€¼

**è€ƒå¯Ÿç‚¹ï¼š**ES6 è§£æ„è¯­æ³•

```js
let obj = { a: 1 };
let { a, b = 2 } = obj;
console.log(a, b); // 1,2
```

#### ğŸ’¬Q9: å¯¹è±¡åŠ¨æ€å±æ€§/è®¡ç®—å±æ€§å

**è€ƒå¯Ÿç‚¹ï¼š**ES6 æ–°ç‰¹æ€§

```js
let key = "name";
let obj = { [key]: "Alice" };
console.log(obj.name); // "Alice"
```
