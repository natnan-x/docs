# Vue Router 面试高频题汇总（含答案）

> 基于 Vue 3 + Vue Router 4，总结面试中出现频率最高的题目与答案。

## 一、基础部分

### 1. 什么是 Vue Router？

Vue Router 是 Vue.js 官方提供的路由管理器，用于在单页应用（SPA）中实现多视图切换和页面导航。

### 2. Vue Router 有几种模式？

| 模式       | 说明                                  | 使用场景               |
| ---------- | ------------------------------------- | ---------------------- |
| `hash`     | URL 带 `#`，基于 `location.hash` 实现 | 兼容性好，适合旧浏览器 |
| `history`  | 使用 HTML5 History API                | 无 `#`，URL 更美观     |
| `abstract` | 不依赖浏览器环境                      | SSR 或测试环境         |

### 3. 如何在 Vue3 中创建路由实例？

```ts
import { createRouter, createWebHistory } from 'vue-router';
import Home from '@/views/Home.vue';

const routes = [{ path: '/', component: Home }];

const router = createRouter({
  history: createWebHistory(),
  routes,
});

export default router;
```

### 4. 路由跳转的几种方式？

- 声明式：`<router-link to="/home">Home</router-link>`
- 编程式：`router.push('/home')` / `router.replace('/home')`
- 历史控制：`router.back()`、`router.forward()`、`router.go(-1)`

### 5. `router.push` 与 `router.replace` 的区别？

| 方法      | 是否新增历史记录 | 返回按钮是否可用 |
| --------- | ---------------- | ---------------- |
| `push`    | ✅ 是            | ✅ 可用          |
| `replace` | ❌ 否            | ❌ 不可返回      |

### 6. `params` 和 `query` 区别？

| 对比项       | params                                       | query                                        |
| ------------ | -------------------------------------------- | -------------------------------------------- |
| URL 表现     | `/user/1`                                    | `/user?id=1`                                 |
| 刷新是否丢失 | 是                                           | 否                                           |
| 定义方式     | 动态路由 `/user/:id`                         | 查询字符串                                   |
| 用法         | `router.push({ name:'User', params:{id:1}})` | `router.push({ path:'/user', query:{id:1}})` |

### 7. 如何实现路由懒加载？

```ts
const routes = [
  { path: '/about', component: () => import('@/views/About.vue') },
];
```

优点：减小首屏加载体积，提高性能。

### 8. 什么是嵌套路由？如何配置？

```ts
const routes = [
  {
    path: '/user',
    component: User,
    children: [
      { path: 'profile', component: Profile },
      { path: 'setting', component: Setting },
    ],
  },
];
```

在父组件中使用 `<router-view />` 渲染子路由。

### 9. 如何实现重定向与别名？

```ts
const routes = [
  { path: '/', redirect: '/home' },
  { path: '/index', alias: '/main', component: Home },
];
```

- `redirect`：URL 变更
- `alias`：URL 不变但展示相同组件

### 10. 如何在组件内访问当前路由信息？

```ts
import { useRoute, useRouter } from 'vue-router';
const route = useRoute();
const router = useRouter();
console.log(route.path);
router.push('/home');
```

## 二、导航守卫部分

### 11. Vue Router 导航守卫有哪几种？

| 类型         | 位置                                                          | 触发时机         |
| ------------ | ------------------------------------------------------------- | ---------------- |
| 全局前置守卫 | `router.beforeEach()`                                         | 路由跳转前       |
| 路由独享守卫 | `beforeEnter`                                                 | 进入该路由前     |
| 组件内守卫   | `beforeRouteEnter` / `beforeRouteUpdate` / `beforeRouteLeave` | 组件生命周期相关 |
| 全局后置守卫 | `router.afterEach()`                                          | 路由确认后       |

### 12. 导航守卫执行顺序？

1. 全局前置守卫
2. 路由独享守卫
3. 组件内 `beforeRouteEnter`
4. 解析异步路由组件
5. 全局解析守卫 `beforeResolve`
6. 全局后置守卫 `afterEach`

### 13. 如何实现登录鉴权？

```ts
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('token');
  if (!token && to.path !== '/login') next('/login');
  else next();
});
```

### 14. `beforeRouteEnter` 中为什么拿不到 `this`？

因为组件尚未创建。可通过回调方式获取：

```ts
beforeRouteEnter(to, from, next) {
  next(vm => { vm.init() })
}
```

### 15. 如何实现动态路由加载？

```ts
router.addRoute({ name: 'Admin', path: '/admin', component: Admin });
```

可在登录后根据权限动态添加路由。

### 16. 如何移除动态路由？

```ts
router.removeRoute('Admin');
```

适用于退出登录场景。

### 17. `router.beforeResolve` 与 `afterEach` 区别？

- `beforeResolve`：在所有异步守卫解析完后执行，可用于接口依赖。
- `afterEach`：导航确认后触发，不影响导航流程。

### 18. 如何防止重复导航报错？

Vue Router 4 自动忽略重复导航，也可手动捕获：

```ts
router.push('/home').catch((err) => {});
```

### 19. 如何实现页面滚动还原？

```ts
const router = createRouter({
  history: createWebHistory(),
  routes,
  scrollBehavior(to, from, savedPosition) {
    return savedPosition || { top: 0 };
  },
});
```

### 20. 如何监听路由变化？

```ts
import { useRoute, watch } from 'vue-router';
const route = useRoute();
watch(
  () => route.fullPath,
  (newVal) => {
    console.log('路由变化：', newVal);
  }
);
```

## 三、进阶部分

### 21. Vue Router 4 与 Vue Router 3 的主要区别？

| 对比项     | Vue Router 3      | Vue Router 4                    |
| ---------- | ----------------- | ------------------------------- |
| Vue 版本   | Vue2              | Vue3                            |
| 创建方式   | `new Router()`    | `createRouter()`                |
| 模式创建   | `mode: 'history'` | `createWebHistory()`            |
| TS 支持    | 弱                | 强                              |
| 组合式 API | ❌ 不支持         | ✅ 支持 `useRoute`、`useRouter` |

### 22. 如何使用命名视图？

```ts
const routes = [
  {
    path: '/layout',
    components: {
      default: Main,
      sidebar: Sidebar,
    },
  },
];
```

在模板中：

```vue
<router-view />
<router-view name="sidebar" />
```

### 23. 如何设置页面标题？

```ts
router.beforeEach((to, from, next) => {
  document.title = to.meta.title || '默认标题';
  next();
});
```

### 24. 如何在 SSR 中使用 Vue Router？

```ts
createRouter({ history: createMemoryHistory(), routes });
```

避免浏览器依赖。

### 25. 如何实现 404 页面？

```ts
{ path: '/:pathMatch(.*)*', name: 'NotFound', component: NotFound }
```

### 26. 如何实现多级路由缓存？

结合 `<keep-alive>` 与 `meta`：

```vue
<keep-alive :include="['Home', 'User']">
  <router-view />
</keep-alive>
```

### 27. 如何获取上一个路由？

可通过全局变量或 `from` 参数记录：

```ts
router.beforeEach((to, from) => {
  sessionStorage.setItem('prev', from.fullPath);
});
```

### 28. 如何传递 props 给路由组件？

```ts
{ path:'/user/:id', component:User, props:true }
```

或函数方式：

```ts
props: (route) => ({ id: Number(route.params.id) });
```

### 29. 如何在路由跳转时添加过渡动画？

```vue
<template>
  <transition name="fade" mode="out-in">
    <router-view />
  </transition>
</template>
```

### 30. 如何优化路由性能？

- 使用懒加载和分块加载。
- 控制嵌套层级。
- 使用路由缓存（`keep-alive`）。
- 仅在必要时启用守卫逻辑。
