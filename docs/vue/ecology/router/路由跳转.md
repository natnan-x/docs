# Vue Router 路由跳转方式

## 一、Vue Router 路由跳转方式

### 1. 声明式导航（template 模板中使用 `<router-link>`）

```vue
<template>
  <div>
    <router-link to="/home">首页</router-link>
    <router-link :to="{ name: 'About', params: { id: 1 } }">关于页</router-link>
  </div>
</template>
```

**特点**：

- 自动处理 `active` 状态（可用 `active-class` 定制）。
- 适合静态跳转。

### 2. 编程式导航（在脚本中使用 `router.push` / `router.replace`）

```ts
import { useRouter } from 'vue-router';

const router = useRouter();

router.push('/home');
router.push({ name: 'User', params: { id: 123 } });
router.replace({ path: '/login' });
router.push({ path: '/search', query: { keyword: 'vue3' } });
```

**区别**：

- `push` 会新增历史记录。
- `replace` 替换当前记录。

### 3. 浏览历史控制

```ts
router.go(-1);
router.back();
router.forward();
```

### 4. 动态参数跳转

```ts
router.push({ name: 'UserDetail', params: { id: 10 } });
const route = useRoute();
console.log(route.params.id);
```

### 5. 守卫中控制跳转

```ts
router.beforeEach((to, from, next) => {
  if (!localStorage.getItem('token') && to.path !== '/login') next('/login');
  else next();
});
```

### 6. 重定向与别名

```ts
const routes = [
  { path: '/', redirect: '/home' },
  { path: '/main', alias: '/index', component: Main },
];
```

## 二、完整示例：`src/router/index.ts`

```ts
import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';
import Home from '@/views/Home.vue';
import User from '@/views/User.vue';
import Login from '@/views/Login.vue';

const routes: RouteRecordRaw[] = [
  { path: '/', name: 'Home', component: Home },
  { path: '/user/:id', name: 'User', component: User, props: true },
  { path: '/login', name: 'Login', component: Login },
  { path: '/:pathMatch(.*)*', redirect: '/' },
];

const router = createRouter({
  history: createWebHistory(),
  routes,
  scrollBehavior() {
    return { top: 0 };
  },
});

router.beforeEach((to, from, next) => {
  const isAuthenticated = !!localStorage.getItem('token');
  if (!isAuthenticated && to.name !== 'Login') next({ name: 'Login' });
  else next();
});

export default router;
```
